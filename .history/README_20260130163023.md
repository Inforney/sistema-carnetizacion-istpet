# üéì Sistema de Carnetizaci√≥n y Control de Accesos - ISTPET

Sistema web completo desarrollado en Laravel 10 para la gesti√≥n integral de carnets digitales, control de accesos a laboratorios e importaci√≥n masiva de estudiantes del Instituto Superior Tecnol√≥gico Mayor Pedro Traversari.

[![Laravel](https://img.shields.io/badge/Laravel-10.x-red)](https://laravel.com)
[![PHP](https://img.shields.io/badge/PHP-8.2+-blue)](https://php.net)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-orange)](https://mysql.com)
[![Bootstrap](https://img.shields.io/badge/Bootstrap-5.3-purple)](https://getbootstrap.com)

---

## üéØ Descripci√≥n del Proyecto

Sistema integral que permite la administraci√≥n completa de estudiantes, generaci√≥n autom√°tica de carnets con c√≥digos QR √∫nicos, control de accesos a laboratorios t√©cnicos y aulas interactivas, importaci√≥n masiva desde Excel, y renovaci√≥n autom√°tica de carnets.

Desarrollado como proyecto de tesis para el tercer semestre de la carrera de Desarrollo de Software en ISTPET.

---

## ‚ú® Caracter√≠sticas Principales

### üé´ **Gesti√≥n de Carnets Digitales**

- ‚úÖ Generaci√≥n autom√°tica de carnets con QR √∫nico por estudiante
- ‚úÖ C√≥digo QR formato: `ISTPET-2026-[C√âDULA]`
- ‚úÖ Validez de 4 a√±os desde la emisi√≥n
- ‚úÖ Estados: Activo, Vencido, Bloqueado
- ‚úÖ Dise√±o institucional con colores ISTPET (azul #1a2342 y dorado #F7931E)
- ‚úÖ Descarga en PDF individual o masiva
- ‚úÖ Vista previa en navegador
- ‚úÖ **Renovaci√≥n autom√°tica** 30 d√≠as antes de vencer (comando artisan programado)

### üë• **Gesti√≥n de Estudiantes**

- ‚úÖ CRUD completo (Crear, Leer, Actualizar, Eliminar)
- ‚úÖ **Validaci√≥n de c√©dulas ecuatorianas** (algoritmo oficial del m√≥dulo 10)
- ‚úÖ **Subir fotos de perfil** (JPG, PNG hasta 2MB)
- ‚úÖ Vista previa de fotos con iniciales si no hay imagen
- ‚úÖ Campos: nombres, apellidos, c√©dula, correo, celular, carrera, ciclo/nivel
- ‚úÖ **5 carreras disponibles:**
    - Desarrollo de Software
    - Redes y Telecomunicaciones
    - Seguridad Inform√°tica
    - Administraci√≥n de Sistemas
    - Soporte T√©cnico
- ‚úÖ Estados: Activo, Inactivo, Bloqueado
- ‚úÖ Bloqueo/desbloqueo de acceso
- ‚úÖ Reseteo de contrase√±as temporales
- ‚úÖ B√∫squeda por nombre, apellido o c√©dula
- ‚úÖ Filtros por ciclo y estado
- ‚úÖ Paginaci√≥n de resultados
- ‚úÖ **Importaci√≥n masiva desde Excel** (ver secci√≥n completa abajo)

### üìä **Importaci√≥n Masiva desde Excel**

- ‚úÖ **Subir archivo Excel** (.xlsx, .xls, .csv) con m√∫ltiples estudiantes
- ‚úÖ **Plantilla descargable** con formato correcto
- ‚úÖ **Validaciones autom√°ticas:**
    - C√©dulas ecuatorianas v√°lidas
    - Emails √∫nicos
    - Celulares formato correcto (09XXXXXXXX)
    - Detecci√≥n de duplicados
    - Campos obligatorios completos
- ‚úÖ **Subir fotos en ZIP** (opcional)
    - Nombrar fotos por c√©dula: `1726429283.jpg`
    - Asignaci√≥n autom√°tica a estudiantes
- ‚úÖ **Generaci√≥n autom√°tica de carnets** al importar
- ‚úÖ **Reporte detallado** post-importaci√≥n:
    - Cantidad de exitosos
    - Lista de errores con detalles
    - Duplicados detectados
    - Carnets generados
- ‚úÖ Importaci√≥n transaccional (rollback si hay errores)

### üî¨ **Gesti√≥n de Laboratorios**

- ‚úÖ Separaci√≥n clara: **Laboratorios T√©cnicos** vs **Aulas Interactivas**
- ‚úÖ CRUD completo de laboratorios
- ‚úÖ Campos: nombre, capacidad, ubicaci√≥n, c√≥digo QR
- ‚úÖ Control de capacidad en tiempo real
- ‚úÖ Estados: Disponible, Ocupado, Mantenimiento
- ‚úÖ Indicador visual de ocupaci√≥n con barra de progreso
- ‚úÖ Filtros por tipo y estado
- ‚úÖ B√∫squeda por nombre

### üìç **Control de Accesos**

- ‚úÖ Registro de entrada/salida mediante escaneo QR
- ‚úÖ Validaci√≥n de carnet activo
- ‚úÖ Asignaci√≥n autom√°tica de equipo
- ‚úÖ Marca de ausencia para estudiantes que no salen
- ‚úÖ Observaciones por acceso
- ‚úÖ Historial completo por estudiante
- ‚úÖ Historial por laboratorio
- ‚úÖ Estudiantes actualmente en laboratorio
- ‚úÖ Estad√≠sticas de accesos por mes

### üìà **Dashboard Administrativo**

- ‚úÖ **Estad√≠sticas en tiempo real:**
    - Total de estudiantes
    - Carnets activos
    - Estudiantes en laboratorios
    - Solicitudes pendientes
- ‚úÖ **8 acciones r√°pidas:**
    - Nuevo Estudiante
    - Generar Carnet
    - Gestionar Laboratorios
    - Ver Estad√≠sticas
    - **Importaci√≥n Masiva** ‚Üê NUEVO
    - Ver Carnets
    - Ver Estudiantes
    - Gestionar Solicitudes
- ‚úÖ **Estado de laboratorios** con:
    - Ocupaci√≥n actual
    - Porcentaje de uso
    - Barra de progreso con colores (verde/amarillo/rojo)
    - Acceso directo a estudiantes en cada lab
- ‚úÖ **√öltimos accesos** del d√≠a
- ‚úÖ **Solicitudes recientes** de contrase√±a

### üîê **Seguridad y Validaciones**

- ‚úÖ **Validaci√≥n de c√©dulas ecuatorianas** (algoritmo m√≥dulo 10)
- ‚úÖ Contrase√±as encriptadas con Bcrypt
- ‚úÖ Protecci√≥n CSRF en todos los formularios
- ‚úÖ Middleware de autenticaci√≥n por roles:
    - Admin (acceso total)
    - Estudiante (vista limitada)
- ‚úÖ Validaciones en servidor y cliente
- ‚úÖ Detecci√≥n de duplicados (c√©dula, email)
- ‚úÖ Sesiones seguras
- ‚úÖ Contrase√±as temporales con cambio obligatorio

### üåê **Interfaz de Usuario**

- ‚úÖ Dise√±o responsive con Bootstrap 5
- ‚úÖ Colores institucionales ISTPET
- ‚úÖ Iconos Bootstrap Icons
- ‚úÖ Mensajes flash de √©xito/error
- ‚úÖ Modales de confirmaci√≥n
- ‚úÖ Alertas visuales
- ‚úÖ Tablas con paginaci√≥n
- ‚úÖ B√∫squeda en tiempo real (AJAX)
- ‚úÖ Preview de im√°genes antes de subir
- ‚úÖ Interfaz en espa√±ol

### üîÑ **Automatizaciones**

- ‚úÖ **Renovaci√≥n autom√°tica de carnets** (comando artisan)
    - Se ejecuta diariamente a las 2:00 AM
    - Busca carnets que vencen en 30 d√≠as
    - Marca viejos como "vencido"
    - Genera nuevos con QR diferente
    - Log en: `storage/logs/carnets_renovacion.log`
- ‚úÖ Generaci√≥n de c√≥digos QR √∫nicos
- ‚úÖ C√°lculo autom√°tico de fechas de vencimiento
- ‚úÖ Asignaci√≥n autom√°tica de equipos en laboratorios

---

## üõ†Ô∏è Tecnolog√≠as Utilizadas

### **Backend**

- **Laravel 10.x** - Framework PHP
- **PHP 8.2+** - Lenguaje de programaci√≥n
- **MySQL 8.0** - Base de datos relacional
- **Composer** - Gestor de dependencias

### **Frontend**

- **Bootstrap 5.3** - Framework CSS
- **Bootstrap Icons** - Iconograf√≠a
- **JavaScript ES6** - L√≥gica del cliente
- **jQuery** - AJAX y manipulaci√≥n DOM

### **Librer√≠as PHP**

- **barryvdh/laravel-dompdf** - Generaci√≥n de PDFs
- **simplesoftwareio/simple-qrcode** - C√≥digos QR
- **phpoffice/phpspreadsheet** - Lectura/escritura Excel
- **Carbon** - Manejo de fechas

### **Desarrollo**

- **XAMPP** - Entorno de desarrollo local
- **Git/GitHub** - Control de versiones
- **VS Code** - Editor de c√≥digo

---

## üì¶ Requisitos del Sistema

### **Requisitos M√≠nimos**

- PHP >= 8.2
- MySQL >= 8.0
- Composer >= 2.5
- Apache 2.4+ (incluido en XAMPP)
- Extensiones PHP:
    - OpenSSL
    - PDO
    - Mbstring
    - Tokenizer
    - XML
    - Ctype
    - JSON
    - BCMath
    - GD (para im√°genes)
    - Zip (para importaci√≥n con fotos)

### **Requisitos Recomendados**

- RAM: 4GB m√≠nimo
- Espacio en disco: 1GB libre
- Navegador moderno (Chrome, Firefox, Edge)

---

## üöÄ Instalaci√≥n y Configuraci√≥n

### **1. Clonar el Repositorio**

```bash
git clone https://github.com/Inforney/sistema-carnetizacion-istpet.git
cd sistema-carnetizacion-istpet
```

### **2. Instalar Dependencias PHP**

```bash
composer install
```

### **3. Configurar Variables de Entorno**

```bash
# Copiar archivo de ejemplo
copy .env.example .env

# Generar clave de aplicaci√≥n
php artisan key:generate
```

### **4. Configurar Base de Datos**

Editar `.env` con tus credenciales:

```env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=carnetizacion_istpet
DB_USERNAME=root
DB_PASSWORD=
```

### **5. Crear Base de Datos**

En phpMyAdmin o MySQL CLI:

```sql
CREATE DATABASE carnetizacion_istpet CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### **6. Ejecutar Migraciones**

```bash
php artisan migrate
```

### **7. Ejecutar Seeders (Datos de Prueba)**

```bash
php artisan db:seed
```

Esto crear√°:

- 2 administradores
- 1 estudiante de prueba (Kevin - CI: 1726429283)
- 6 laboratorios (3 t√©cnicos + 3 aulas)

### **8. Crear Enlace Simb√≥lico para Storage**

```bash
php artisan storage:link
```

Esto permite acceder a las fotos subidas.

### **9. Configurar Permisos (Linux/Mac)**

```bash
chmod -R 775 storage bootstrap/cache
```

### **10. Iniciar Servidor de Desarrollo**

```bash
php artisan serve
```

### **11. Acceder al Sistema**

```
http://127.0.0.1:8000
```

---

## üë• Credenciales de Acceso

### **Administrador Principal**

```
Usuario: admin
Contrase√±a: admin123
```

### **Administrador Secundario**

```
Usuario: carlos
Contrase√±a: admin123
```

### **Estudiante de Prueba**

```
C√©dula: 1726429283
Contrase√±a: estudiante123
```

---

## üìÇ Estructura del Proyecto

```
carnetizacion-istpet/
‚îÇ
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ Console/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Commands/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ RenovarCarnetsAutomatico.php    # Comando renovaci√≥n autom√°tica
‚îÇ   ‚îú‚îÄ‚îÄ Helpers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CedulaValidator.php                 # Validador de c√©dulas ecuatorianas
‚îÇ   ‚îú‚îÄ‚îÄ Http/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Admin/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CarnetController.php        # CRUD carnets
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EstudianteController.php    # CRUD estudiantes + fotos
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LaboratorioController.php   # CRUD laboratorios
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AccesoController.php        # Control accesos
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ImportacionController.php   # Importaci√≥n Excel ‚Üê NUEVO
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DashboardController.php     # Dashboard admin
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Estudiante/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CarnetController.php        # Vista estudiante
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Middleware/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AdminMiddleware.php             # Protecci√≥n admin
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ EstudianteMiddleware.php        # Protecci√≥n estudiante
‚îÇ   ‚îî‚îÄ‚îÄ Models/
‚îÇ       ‚îú‚îÄ‚îÄ Usuario.php                         # Modelo estudiantes
‚îÇ       ‚îú‚îÄ‚îÄ Carnet.php                          # Modelo carnets
‚îÇ       ‚îú‚îÄ‚îÄ Laboratorio.php                     # Modelo laboratorios
‚îÇ       ‚îú‚îÄ‚îÄ Acceso.php                          # Modelo accesos
‚îÇ       ‚îî‚îÄ‚îÄ Admin.php                           # Modelo administradores
‚îÇ
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ migrations/                             # Estructura de BD
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_01_create_usuarios_table.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_02_create_carnets_table.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_03_create_laboratorios_table.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_04_create_accesos_table.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 2024_01_05_create_admins_table.php
‚îÇ   ‚îî‚îÄ‚îÄ seeders/                                # Datos iniciales
‚îÇ       ‚îî‚îÄ‚îÄ DatabaseSeeder.php
‚îÇ
‚îú‚îÄ‚îÄ resources/
‚îÇ   ‚îî‚îÄ‚îÄ views/
‚îÇ       ‚îú‚îÄ‚îÄ admin/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.blade.php             # Dashboard principal
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ estudiantes/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.blade.php             # Lista estudiantes
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create.blade.php            # Crear con foto ‚Üê MEJORADO
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edit.blade.php              # Editar con foto ‚Üê MEJORADO
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ show.blade.php              # Detalle estudiante
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ carnets/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.blade.php
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create.blade.php
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ show.blade.php
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pdf.blade.php               # Template PDF
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ laboratorios/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.blade.php             # Con filtros tipo
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create.blade.php
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edit.blade.php
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ show.blade.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ accesos/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.blade.php
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crear.blade.php
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ estadisticas.blade.php
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ importacion/                    # ‚Üê NUEVO
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ index.blade.php             # Formulario importaci√≥n
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ resultado.blade.php         # Reporte resultados
‚îÇ       ‚îú‚îÄ‚îÄ estudiante/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ carnet/
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ show.blade.php              # Vista carnet estudiante
‚îÇ       ‚îî‚îÄ‚îÄ layouts/
‚îÇ           ‚îî‚îÄ‚îÄ app.blade.php                   # Layout principal
‚îÇ
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ web.php                                 # Rutas del sistema
‚îÇ
‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ public/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ fotos_perfil/                   # Fotos estudiantes ‚Üê NUEVO
‚îÇ   ‚îî‚îÄ‚îÄ logs/
‚îÇ       ‚îî‚îÄ‚îÄ carnets_renovacion.log              # Log renovaciones
‚îÇ
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ storage/                                # Symlink a storage/app/public
‚îÇ
‚îú‚îÄ‚îÄ .env                                        # Configuraci√≥n del sistema
‚îú‚îÄ‚îÄ composer.json                               # Dependencias PHP
‚îú‚îÄ‚îÄ artisan                                     # CLI de Laravel
‚îî‚îÄ‚îÄ README.md                                   # Este archivo
```

---

## üîÑ Comandos Artisan Personalizados

### **Renovaci√≥n Autom√°tica de Carnets**

```bash
# Ejecutar manualmente
php artisan carnets:renovar-automatico

# Ver logs
type storage\logs\carnets_renovacion.log
```

**Funcionamiento:**

1. Busca carnets que vencen en los pr√≥ximos 30 d√≠as
2. Marca el carnet viejo como `estado = 'vencido'`
3. Genera un nuevo carnet con:
    - C√≥digo QR √∫nico diferente
    - Fecha emisi√≥n: HOY
    - Fecha vencimiento: HOY + 6 meses
    - Estado: activo
4. Guarda log detallado

**Programaci√≥n Autom√°tica:**

En `app/Console/Kernel.php`:

```php
$schedule->command('carnets:renovar-automatico')
         ->daily()
         ->at('02:00');
```

Para activar en producci√≥n:

```bash
# Agregar al crontab del servidor
* * * * * cd /ruta/proyecto && php artisan schedule:run >> /dev/null 2>&1
```

---

## üìä Importaci√≥n Masiva - Gu√≠a Completa

### **Formato del Archivo Excel**

| nombres | apellidos | cedula     | tipo_documento | correo_institucional | celular    | carrera                | ciclo_nivel   | nacionalidad | foto_filename  |
| ------- | --------- | ---------- | -------------- | -------------------- | ---------- | ---------------------- | ------------- | ------------ | -------------- |
| Mar√≠a   | Gonz√°lez  | 1760234567 | cedula         | maria@istpet.edu.ec  | 0998765432 | Desarrollo de Software | SEGUNDO NIVEL | Ecuatoriana  | 1760234567.jpg |

### **Columnas Obligatorias**

- `nombres` - Nombres del estudiante
- `apellidos` - Apellidos completos
- `cedula` - C√©dula ecuatoriana v√°lida (10 d√≠gitos)
- `correo_institucional` - Email √∫nico
- `celular` - Celular ecuatoriano (09XXXXXXXX)
- `carrera` - Una de las 5 carreras disponibles
- `ciclo_nivel` - PRIMER/SEGUNDO/TERCER/CUARTO NIVEL

### **Columnas Opcionales**

- `tipo_documento` - Por defecto: "cedula"
- `nacionalidad` - Por defecto: "Ecuatoriana"
- `foto_filename` - Nombre del archivo en ZIP (ej: 1760234567.jpg)

### **Paso a Paso**

1. **Ir a Importaci√≥n Masiva:**

    ```
    Dashboard > Importaci√≥n Masiva
    ```

2. **Descargar plantilla Excel**

3. **Llenar plantilla con datos**

4. **(Opcional) Preparar fotos:**
    - Nombrar cada foto con la c√©dula: `1726429283.jpg`
    - Comprimir todas en un archivo `.zip`

5. **Subir archivos:**
    - Seleccionar Excel
    - Seleccionar ZIP de fotos (opcional)
    - Marcar "Generar carnets autom√°ticamente"
    - Click "Iniciar Importaci√≥n"

6. **Revisar resultados:**
    - Exitosos (verde)
    - Errores con detalles (rojo)
    - Duplicados detectados (amarillo)
    - Carnets generados (azul)

### **Validaciones Autom√°ticas**

- ‚úÖ C√©dula ecuatoriana v√°lida (algoritmo m√≥dulo 10)
- ‚úÖ Email √∫nico en BD
- ‚úÖ Celular formato 09XXXXXXXX
- ‚úÖ Detecci√≥n de duplicados
- ‚úÖ Campos obligatorios completos
- ‚úÖ Formato de archivo correcto

---

## üîê Seguridad Implementada

### **Autenticaci√≥n y Autorizaci√≥n**

- Middleware `AdminMiddleware` protege rutas administrativas
- Middleware `EstudianteMiddleware` protege rutas de estudiantes
- Guards separados para admin y estudiante
- Sesiones seguras con Laravel Sanctum

### **Validaci√≥n de Datos**

- **C√©dulas ecuatorianas:** Algoritmo oficial del m√≥dulo 10
- **Emails:** Formato v√°lido + unicidad
- **Contrase√±as:** M√≠nimo 8 caracteres, encriptadas con Bcrypt
- **Archivos:** Validaci√≥n de tipo y tama√±o (fotos max 2MB, Excel max 10MB)

### **Protecci√≥n CSRF**

- Token CSRF en todos los formularios
- Validaci√≥n autom√°tica por Laravel

### **SQL Injection**

- Uso de Eloquent ORM
- Prepared statements en todas las consultas

### **XSS Protection**

- Blade templates con escape autom√°tico
- Validaci√≥n de entrada en servidor

---

## üì± M√≥dulos del Sistema

### **1. M√≥dulo de Estudiantes**

- Lista paginada con b√∫squeda y filtros
- Crear estudiante con foto y carrera
- Editar informaci√≥n completa
- Subir/cambiar/eliminar foto
- Bloquear/desbloquear acceso
- Resetear contrase√±a
- Ver historial de accesos
- Eliminar estudiante

### **2. M√≥dulo de Carnets**

- Generar carnet individual
- Generar carnets masivos
- Descargar PDF individual
- Descargar PDF masivo (m√∫ltiples por p√°gina)
- Visualizar en navegador
- Renovar carnet manualmente
- Bloquear/activar carnet
- Ver detalle de carnet

### **3. M√≥dulo de Laboratorios**

- Listar con filtros (T√©cnicos/Aulas)
- Crear laboratorio con QR
- Editar informaci√≥n
- Ver ocupaci√≥n actual
- Cambiar estado (Disponible/Mantenimiento)
- Ver estudiantes activos en lab
- Historial de accesos
- Eliminar laboratorio

### **4. M√≥dulo de Accesos**

- Registrar entrada (escaneo QR)
- Registrar salida
- Marcar ausentes
- Ver estudiantes activos por lab
- Historial completo
- Filtros por fecha y laboratorio
- Estad√≠sticas mensuales
- Exportar registros

### **5. M√≥dulo de Importaci√≥n**

- Subir Excel con estudiantes
- Subir ZIP con fotos
- Validaci√≥n en tiempo real
- Reporte detallado
- Generaci√≥n autom√°tica de carnets
- Detecci√≥n de duplicados
- Log de errores

---

## üé® Capturas de Pantalla

### **Dashboard Administrativo**

Estad√≠sticas en tiempo real, acciones r√°pidas, estado de laboratorios.

### **Gesti√≥n de Estudiantes**

Lista con b√∫squeda, filtros, paginaci√≥n. Formularios con foto y carrera.

### **Importaci√≥n Masiva**

Formulario de carga, plantilla descargable, reporte de resultados.

### **Carnet Digital**

Vista previa, dise√±o institucional, c√≥digo QR grande.

### **Control de Accesos**

Registro de entrada/salida, estudiantes activos, historial.

### **Gesti√≥n de Laboratorios**

Separaci√≥n t√©cnicos/aulas, ocupaci√≥n en tiempo real, filtros.

---

## üß™ Testing

Para ejecutar pruebas:

```bash
# Instalar dependencias de desarrollo
composer install --dev

# Ejecutar tests
php artisan test
```

---

## üêõ Soluci√≥n de Problemas Comunes

### **Error: "Storage link not found"**

```bash
php artisan storage:link
```

### **Error: "Permission denied" en storage**

```bash
chmod -R 775 storage bootstrap/cache
```

### **Fotos no se muestran (404)**

1. Verificar symlink: `php artisan storage:link`
2. Verificar permisos: `storage/app/public/fotos_perfil`
3. Verificar ruta en BD: debe ser `storage/fotos_perfil/foto_xxx.jpg`

### **Importaci√≥n Excel falla**

1. Verificar que PhpSpreadsheet est√° instalado: `composer require phpoffice/phpspreadsheet`
2. Verificar formato de archivo (xlsx, xls, csv)
3. Revisar logs: `storage/logs/laravel.log`

### **Renovaci√≥n autom√°tica no funciona**

1. Verificar comando: `php artisan carnets:renovar-automatico`
2. Ver logs: `storage/logs/carnets_renovacion.log`
3. Verificar cron configurado en servidor

---

## üìù Changelog

### **Versi√≥n 2.0** (Actual - Enero 2026)

- ‚úÖ Importaci√≥n masiva desde Excel
- ‚úÖ Subir fotos de estudiantes
- ‚úÖ Campo carrera con 5 opciones
- ‚úÖ Dashboard mejorado con 8 acciones r√°pidas
- ‚úÖ Validaci√≥n de c√©dulas ecuatorianas
- ‚úÖ Renovaci√≥n autom√°tica de carnets
- ‚úÖ Separaci√≥n laboratorios t√©cnicos/aulas
- ‚úÖ Almacenamiento correcto con Storage facade

### **Versi√≥n 1.0** (Diciembre 2025)

- ‚úÖ CRUD de estudiantes b√°sico
- ‚úÖ Generaci√≥n de carnets con QR
- ‚úÖ Control de accesos a laboratorios
- ‚úÖ Dashboard administrativo
- ‚úÖ Sistema de autenticaci√≥n

---

## üöÄ Roadmap (Futuras Mejoras)

- [ ] Dashboard con gr√°ficos (Chart.js)
- [ ] Reportes en PDF
- [ ] Notificaciones por email
- [ ] Exportar datos a Excel
- [ ] Backup autom√°tico
- [ ] API REST
- [ ] App m√≥vil (React Native)

---

## üë®‚Äçüíª Equipo de Desarrollo

### **Desarrollador Principal**

- **Kevin Gabriel Huilca Campa√±a**
    - C√©dula: 1726429283
    - Carrera: Desarrollo de Software
    - Ciclo: Tercer Nivel
    - Email: kevin.huilca@istpet.edu.ec
    - Rol: Full Stack Developer

### **Colaboradores**

- **Mat√≠as** - Ayudante de desarrollo
- **Iv√°n** - Ayudante de desarrollo

---

## üè´ Instituci√≥n

**Instituto Superior Tecnol√≥gico Mayor Pedro Traversari (ISTPET)**

- Carrera: Desarrollo de Software
- Nivel: Tercer Nivel
- A√±o: 2025-2026
- Proyecto: Tesis de Grado

---

## üìÑ Licencia

Este proyecto fue desarrollado como proyecto acad√©mico para el Instituto Superior Tecnol√≥gico Mayor Pedro Traversari (ISTPET).

**Restricciones:**

- Uso exclusivamente acad√©mico
- No comercial
- Propiedad intelectual de ISTPET y desarrolladores

---

## üìû Soporte y Contacto

Para dudas o sugerencias sobre el proyecto:

- **Email:** kevin.huilca@istpet.edu.ec
- **GitHub:** https://github.com/Inforney/sistema-carnetizacion-istpet
- **Instituci√≥n:** ISTPET - Quito, Ecuador

---

## üôè Agradecimientos

- Instituto Superior Tecnol√≥gico Mayor Pedro Traversari
- Docentes de la carrera de Desarrollo de Software
- Compa√±eros de clase por el apoyo
- Comunidad Laravel por la documentaci√≥n

---

## üìö Referencias

- [Documentaci√≥n Laravel 10](https://laravel.com/docs/10.x)
- [Bootstrap 5 Docs](https://getbootstrap.com/docs/5.3)
- [PhpSpreadsheet Docs](https://phpspreadsheet.readthedocs.io)
- [DomPDF Docs](https://github.com/barryvdh/laravel-dompdf)
- [Simple QR Code](https://www.simplesoftware.io/docs/simple-qrcode)

---

<div align="center">

**Desarrollado con ‚ù§Ô∏è por estudiantes de Desarrollo de Software**

**ISTPET 2025-2026**

[![GitHub](https://img.shields.io/badge/GitHub-Inforney-black?logo=github)](https://github.com/Inforney)
[![Laravel](https://img.shields.io/badge/Made%20with-Laravel-red?logo=laravel)](https://laravel.com)

</div>
